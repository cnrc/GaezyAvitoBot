"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π .env —Ñ–∞–π–ª–æ–≤

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–∞—Ä—Å–µ—Ä–∞ Avito.
–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ .env —Ñ–∞–π–ª–∞.

    PROXY_STRING - —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–∫—Å–∏
    PROXY_CHANGE_URL - URL –¥–ª—è —Å–º–µ–Ω—ã IP –ø—Ä–æ–∫—Å–∏
"""
import os
from dotenv import load_dotenv
from src.dto import AvitoConfig

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞
load_dotenv()


def get_avito_config() -> AvitoConfig:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–∞—Ä—Å–µ—Ä–∞ Avito
    
    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ –≤—Å–µ–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–∞—Ä—Å–µ—Ä–∞.
    –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env —Ñ–∞–π–ª),
    –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—é—Ç—Å—è –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –∫–æ–¥–µ.
    
    Returns:
        AvitoConfig: –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–∞—Ä—Å–µ—Ä–∞
    
    –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
        
    üìã –û–°–ù–û–í–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò:
        urls - —Å–ø–∏—Å–æ–∫ URL –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
        count - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (3)
        
    üîç –§–ò–õ–¨–¢–†–´ –ü–û–ò–°–ö–ê:
        keys_word_white_list - –±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        keys_word_black_list - —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        seller_black_list - —á–µ—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ 
        
    üí∞ –¶–ï–ù–û–í–´–ï –§–ò–õ–¨–¢–†–´:
        min_price - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
        max_price - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
        
    üåç –õ–û–ö–ê–¶–ò–Ø –ò –ü–†–û–ö–°–ò:
        geo - –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–µ–≥–∏–æ–Ω (–∏–∑ .env: GEO)
        proxy_string - —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–∫—Å–∏ (–∏–∑ .env: PROXY_STRING)
        proxy_change_url - URL –¥–ª—è —Å–º–µ–Ω—ã IP (–∏–∑ .env: PROXY_CHANGE_URL)
        
    ‚è±Ô∏è –¢–ê–ô–ú–ê–£–¢–´ –ò –ü–ê–£–ó–´:
        pause_general - –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (60 —Å–µ–∫—É–Ω–¥)
        pause_between_links - –ø–∞—É–∑–∞ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å—Å—ã–ª–æ–∫
        max_count_of_retry - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ (5)
        
    üìÖ –§–ò–õ–¨–¢–†–´ –ü–û –í–†–ï–ú–ï–ù–ò:
        max_age - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è (0 = –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
        
    üéØ –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –§–ò–õ–¨–¢–†–´:
        ignore_reserv - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (False)
        ignore_promotion - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (False)
        
    üîß –†–ï–ñ–ò–ú–´ –†–ê–ë–û–¢–´:
        one_time_start - –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (False = —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ü–∏–∫–ª–µ)
        one_file_for_link - —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏ (False)
    """
    
    # üìã URLs –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ - –¥–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞ –≤–∞—à–∏ —Å—Å—ã–ª–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ Avito
    urls = []
    
    return AvitoConfig(
        # üìã –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        urls=urls,
        count=1,  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
        
        # üîç –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–ø—É—Å—Ç—ã–µ —Å–ø–∏—Å–∫–∏ = –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
        keys_word_white_list=[],  # –¢–æ–ª—å–∫–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
        keys_word_black_list=[],  # –ò—Å–∫–ª—é—á–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
        seller_black_list=[],     # –ò—Å–∫–ª—é—á–∏—Ç—å —ç—Ç–∏—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
        
        # üí∞ –¶–µ–Ω–æ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
        max_price=9999999999,  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
        min_price=1000,        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö
        
        # üåç –õ–æ–∫–∞—Ü–∏—è –∏ –ø—Ä–æ–∫—Å–∏ (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è)
        geo="",                          # –†–µ–≥–∏–æ–Ω –ø–æ–∏—Å–∫–∞
        proxy_string=os.getenv("PROXY_STRING", ""),        # –ü—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä
        proxy_change_url=os.getenv("PROXY_CHANGE_URL", ""), # URL —Å–º–µ–Ω—ã IP (fallback)
        # –°–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ –¥–ª—è —Å–º–µ–Ω—ã IP (—Ñ–æ—Ä–º–∞—Ç: "url1|url2|url3")
        proxy_change_urls=[url.strip() for url in os.getenv("PROXY_CHANGE_URLS", "").split("|") if url.strip()],
        
        # ‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        pause_general=60,        # –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
        pause_between_links=0,   # –ü–∞—É–∑–∞ –º–µ–∂–¥—É —Å—Å—ã–ª–∫–∞–º–∏ (—Å–µ–∫—É–Ω–¥—ã)
        max_age=300,              # –ú–∞–∫—Å. –≤–æ–∑—Ä–∞—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è (0 = –±–µ–∑ –ª–∏–º–∏—Ç–∞)
        max_count_of_retry=5,   # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
        
        # üéØ –§–∏–ª—å—Ç—Ä—ã –æ–±—ä—è–≤–ª–µ–Ω–∏–π
        ignore_reserv=False,     # True = –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
        ignore_promotion=False,  # True = –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–¥–≤–∏–≥–∞–µ–º—ã–µ
        
        # üîß –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
        one_time_start=False,    # True = –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫
        one_file_for_link=False, # True = –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Å—ã–ª–∫–∏
    )


# ==========================================
# üöÄ –ì–û–¢–û–í–´–ï –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ –≠–ö–ó–ï–ú–ü–õ–Ø–†–´
# ==========================================

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –≥–æ—Ç–æ–≤—ã–µ –∫ –∏–º–ø–æ—Ä—Ç—É
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑

try:
    AVITO_CONFIG = get_avito_config()
    """
    –ì–æ—Ç–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞ Avito.
    """
except ValueError as e:
    # –ï—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç None
    print(f"‚ö†Ô∏è  –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: {e}")
    print("üí° –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏")
    AVITO_CONFIG = None